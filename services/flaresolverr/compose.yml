services:
    flaresolverr:
        container_name: flaresolverr
        image: "ghcr.io/flaresolverr/flaresolverr:latest"
        network_mode: "service:gluetun" # Route all networking through Gluetun.
        restart: "unless-stopped"
        user: "${PUID}:${PGID}"
        hostname: "flaresolverr"
        security_opt: ["no-new-privileges:true"]
        healthcheck:
            interval: "1m"
            retries: "3"
            start_period: "15s"
            test: ["CMD", "curl", "-f", "http://127.0.0.1:8191/health"]
            timeout: "3s"
        environment:
            TZ: "${TZ}" # Timezone to configure the container to use.
        ports:
            - "${FLARESOLVERR_PORT:-8191}:8191/tcp" # Local API.

networks:
    media:
        driver: "bridge"
        external: "true"
        name: "media-network"
